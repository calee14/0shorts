(()=>{"use strict";({136:function(e,o){var t=this&&this.__awaiter||function(e,o,t,c){return new(t||(t=Promise))((function(n,r){function l(e){try{a(c.next(e))}catch(e){r(e)}}function i(e){try{a(c.throw(e))}catch(e){r(e)}}function a(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(l,i)}a((c=c.apply(e,o||[])).next())}))};Object.defineProperty(o,"__esModule",{value:!0}),console.log("background.ts"),chrome.declarativeNetRequest.onRuleMatchedDebug.addListener((e=>{const o=`Navigation blocked to ${e.request.url} on tab ${e.request.tabId}.`;console.log(o)})),chrome.runtime.onMessage.addListener((function(e,o,t){console.log(o.tab?"from a content script:"+o.tab.url:"from the extension"),"hello"===e.greeting&&t({farewell:"goodbye"})})),chrome.runtime.onInstalled.addListener((e=>t(void 0,void 0,void 0,(function*(){if("install"===e.reason){yield chrome.storage.local.set({blockedUrls:["||facebook.com","||instagram.com","||tikok.com","||twitter.com","||youtube.com","||tumblr.com","||netflix.com","||max.com"],unblockedUrls:[]});const e=yield chrome.storage.local.get("blockedUrls"),t=e.blockedUrls;console.log(e,e.blockedUrls,e.blockedUrls);const c=[];var o=0;t.forEach((e=>{const t={id:100+o,priority:1,action:{type:"redirect",redirect:{url:"https://google.com"}},condition:{urlFilter:e,resourceTypes:["main_frame"]}};o+=1,c.push(t)})),console.log(c);const n={removeRuleIds:(yield chrome.declarativeNetRequest.getDynamicRules()).map((e=>e.id)),addRules:c};yield chrome.declarativeNetRequest.updateDynamicRules(n)}}))))}})[136](0,{})})();